//
//  DarkSkyTests.swift
//  DarkSkyTests
//
//  Created by Yariv Nissim on 12/10/18.
//  Copyright © 2018 Yariv. All rights reserved.
//

import XCTest
@testable import DarkSky

class DarkSkyForecastTests: XCTestCase {
    func testValidResponse() {
        XCTAssertNoThrow(try DarkSkyForecast(data: validForecastData))
    }

    func testInvalidResponse() {
        XCTAssertThrowsError(try DarkSkyForecast(data: Data()))
    }
}

private let validForecastData = """
{"latitude":37.8267,"longitude":-122.4233,"timezone":"America/Los_Angeles","daily":{"summary":"Rain on Sunday, with high temperatures rising to 61°F on Wednesday.","icon":"rain","data":[{"time":1544428800,"summary":"Mostly cloudy until afternoon.","icon":"partly-cloudy-day","sunriseTime":1544454964,"sunsetTime":1544489527,"moonPhase":0.11,"precipIntensity":0.0003,"precipIntensityMax":0.004,"precipIntensityMaxTime":1544454000,"precipProbability":0.29,"precipType":"rain","temperatureHigh":56.01,"temperatureHighTime":1544486400,"temperatureLow":47.94,"temperatureLowTime":1544540400,"apparentTemperatureHigh":56.01,"apparentTemperatureHighTime":1544486400,"apparentTemperatureLow":46.1,"apparentTemperatureLowTime":1544540400,"dewPoint":45.75,"humidity":0.82,"pressure":1022.96,"windSpeed":2,"windGust":8.01,"windGustTime":1544482800,"windBearing":4,"cloudCover":0.58,"uvIndex":2,"uvIndexTime":1544468400,"visibility":6.05,"ozone":304.01,"temperatureMin":48.31,"temperatureMinTime":1544443200,"temperatureMax":56.01,"temperatureMaxTime":1544486400,"apparentTemperatureMin":47.81,"apparentTemperatureMinTime":1544436000,"apparentTemperatureMax":56.01,"apparentTemperatureMaxTime":1544486400},{"time":1544515200,"summary":"Partly cloudy throughout the day.","icon":"partly-cloudy-day","sunriseTime":1544541410,"sunsetTime":1544575936,"moonPhase":0.14,"precipIntensity":0.0004,"precipIntensityMax":0.0018,"precipIntensityMaxTime":1544547600,"precipProbability":0.13,"precipType":"rain","temperatureHigh":58.69,"temperatureHighTime":1544572800,"temperatureLow":52.26,"temperatureLowTime":1544630400,"apparentTemperatureHigh":58.69,"apparentTemperatureHighTime":1544572800,"apparentTemperatureLow":52.26,"apparentTemperatureLowTime":1544630400,"dewPoint":45.53,"humidity":0.76,"pressure":1022.54,"windSpeed":5.81,"windGust":13.51,"windGustTime":1544594400,"windBearing":303,"cloudCover":0.36,"uvIndex":2,"uvIndexTime":1544554800,"visibility":10,"ozone":294.16,"temperatureMin":47.94,"temperatureMinTime":1544540400,"temperatureMax":58.69,"temperatureMaxTime":1544572800,"apparentTemperatureMin":46.1,"apparentTemperatureMinTime":1544540400,"apparentTemperatureMax":58.69,"apparentTemperatureMaxTime":1544572800},{"time":1544601600,"summary":"Partly cloudy until evening.","icon":"partly-cloudy-day","sunriseTime":1544627854,"sunsetTime":1544662346,"moonPhase":0.17,"precipIntensity":0.0001,"precipIntensityMax":0.0003,"precipIntensityMaxTime":1544626800,"precipProbability":0.09,"precipType":"rain","temperatureHigh":61.05,"temperatureHighTime":1544659200,"temperatureLow":48.35,"temperatureLowTime":1544713200,"apparentTemperatureHigh":61.05,"apparentTemperatureHighTime":1544659200,"apparentTemperatureLow":45.55,"apparentTemperatureLowTime":1544713200,"dewPoint":46.19,"humidity":0.73,"pressure":1025.07,"windSpeed":5.86,"windGust":17.61,"windGustTime":1544641200,"windBearing":339,"cloudCover":0.38,"uvIndex":2,"uvIndexTime":1544641200,"visibility":10,"ozone":283.98,"temperatureMin":52.26,"temperatureMinTime":1544630400,"temperatureMax":61.05,"temperatureMaxTime":1544659200,"apparentTemperatureMin":52.26,"apparentTemperatureMinTime":1544630400,"apparentTemperatureMax":61.05,"apparentTemperatureMaxTime":1544659200},{"time":1544688000,"summary":"Partly cloudy overnight.","icon":"partly-cloudy-night","sunriseTime":1544714297,"sunsetTime":1544748758,"moonPhase":0.2,"precipIntensity":0.0001,"precipIntensityMax":0.0004,"precipIntensityMaxTime":1544713200,"precipProbability":0.06,"precipType":"rain","temperatureHigh":58.47,"temperatureHighTime":1544745600,"temperatureLow":49.66,"temperatureLowTime":1544796000,"apparentTemperatureHigh":58.47,"apparentTemperatureHighTime":1544745600,"apparentTemperatureLow":46.68,"apparentTemperatureLowTime":1544796000,"dewPoint":38.69,"humidity":0.56,"pressure":1024.14,"windSpeed":5.26,"windGust":9.46,"windGustTime":1544734800,"windBearing":74,"cloudCover":0.15,"uvIndex":2,"uvIndexTime":1544727600,"visibility":10,"ozone":285.47,"temperatureMin":48.35,"temperatureMinTime":1544713200,"temperatureMax":58.47,"temperatureMaxTime":1544745600,"apparentTemperatureMin":45.55,"apparentTemperatureMinTime":1544713200,"apparentTemperatureMax":58.47,"apparentTemperatureMaxTime":1544745600},{"time":1544774400,"summary":"Mostly cloudy throughout the day.","icon":"partly-cloudy-day","sunriseTime":1544800738,"sunsetTime":1544835172,"moonPhase":0.23,"precipIntensity":0.0043,"precipIntensityMax":0.0215,"precipIntensityMaxTime":1544828400,"precipProbability":0.44,"precipType":"rain","temperatureHigh":57.32,"temperatureHighTime":1544832000,"temperatureLow":50.02,"temperatureLowTime":1544889600,"apparentTemperatureHigh":57.32,"apparentTemperatureHighTime":1544832000,"apparentTemperatureLow":50.02,"apparentTemperatureLowTime":1544889600,"dewPoint":47.3,"humidity":0.78,"pressure":1018.78,"windSpeed":4.65,"windGust":21.61,"windGustTime":1544817600,"windBearing":171,"cloudCover":0.75,"uvIndex":2,"uvIndexTime":1544817600,"visibility":10,"ozone":308.51,"temperatureMin":49.66,"temperatureMinTime":1544796000,"temperatureMax":57.32,"temperatureMaxTime":1544832000,"apparentTemperatureMin":46.68,"apparentTemperatureMinTime":1544796000,"apparentTemperatureMax":57.32,"apparentTemperatureMaxTime":1544832000},{"time":1544860800,"summary":"Mostly cloudy throughout the day.","icon":"partly-cloudy-day","sunriseTime":1544887178,"sunsetTime":1544921588,"moonPhase":0.26,"precipIntensity":0.0016,"precipIntensityMax":0.0042,"precipIntensityMaxTime":1544896800,"precipProbability":0.19,"precipType":"rain","temperatureHigh":56.61,"temperatureHighTime":1544918400,"temperatureLow":53.91,"temperatureLowTime":1544950800,"apparentTemperatureHigh":56.61,"apparentTemperatureHighTime":1544918400,"apparentTemperatureLow":53.91,"apparentTemperatureLowTime":1544950800,"dewPoint":48.12,"humidity":0.83,"pressure":1018.02,"windSpeed":2.06,"windGust":11.54,"windGustTime":1544943600,"windBearing":107,"cloudCover":0.67,"uvIndex":2,"uvIndexTime":1544900400,"visibility":10,"ozone":297.36,"temperatureMin":50.02,"temperatureMinTime":1544889600,"temperatureMax":56.61,"temperatureMaxTime":1544918400,"apparentTemperatureMin":50.02,"apparentTemperatureMinTime":1544889600,"apparentTemperatureMax":56.61,"apparentTemperatureMaxTime":1544918400},{"time":1544947200,"summary":"Breezy until afternoon and rain starting in the afternoon, continuing until evening.","icon":"rain","sunriseTime":1544973616,"sunsetTime":1545008006,"moonPhase":0.29,"precipIntensity":0.0194,"precipIntensityMax":0.0593,"precipIntensityMaxTime":1545004800,"precipProbability":0.86,"precipType":"rain","temperatureHigh":57.5,"temperatureHighTime":1544997600,"temperatureLow":51.55,"temperatureLowTime":1545055200,"apparentTemperatureHigh":57.5,"apparentTemperatureHighTime":1544997600,"apparentTemperatureLow":51.55,"apparentTemperatureLowTime":1545055200,"dewPoint":50.79,"humidity":0.84,"pressure":1017.07,"windSpeed":10.34,"windGust":38.13,"windGustTime":1544983200,"windBearing":179,"cloudCover":0.83,"uvIndex":2,"uvIndexTime":1544990400,"visibility":7.68,"ozone":311.83,"temperatureMin":53.91,"temperatureMinTime":1544950800,"temperatureMax":57.5,"temperatureMaxTime":1544997600,"apparentTemperatureMin":53.91,"apparentTemperatureMinTime":1544950800,"apparentTemperatureMax":57.5,"apparentTemperatureMaxTime":1544997600},{"time":1545033600,"summary":"Mostly cloudy throughout the day.","icon":"partly-cloudy-night","sunriseTime":1545060053,"sunsetTime":1545094426,"moonPhase":0.33,"precipIntensity":0.0023,"precipIntensityMax":0.0203,"precipIntensityMaxTime":1545037200,"precipProbability":0.33,"precipType":"rain","temperatureHigh":57.09,"temperatureHighTime":1545087600,"temperatureLow":53.72,"temperatureLowTime":1545141600,"apparentTemperatureHigh":57.09,"apparentTemperatureHighTime":1545087600,"apparentTemperatureLow":53.72,"apparentTemperatureLowTime":1545141600,"dewPoint":45.64,"humidity":0.71,"pressure":1024.06,"windSpeed":1.93,"windGust":6.78,"windGustTime":1545033600,"windBearing":297,"cloudCover":0.5,"uvIndex":2,"uvIndexTime":1545073200,"visibility":10,"ozone":293.23,"temperatureMin":51.55,"temperatureMinTime":1545055200,"temperatureMax":57.09,"temperatureMaxTime":1545087600,"apparentTemperatureMin":51.55,"apparentTemperatureMinTime":1545055200,"apparentTemperatureMax":57.09,"apparentTemperatureMaxTime":1545087600}]},"offset":-8}
""".data(using: .utf8)!

